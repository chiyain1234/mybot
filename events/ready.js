const config = require("../config.js");

module.exports = {
    name: 'ready',
    async run(client) {
        await client.application.fetch();
        await client.application.commands.fetch();
        let totalCommands = 0;
        client.application.commands.cache.forEach(command => {
            totalCommands++;
            if (command.options) {
                totalCommands += countSubCommands(command.options);
            }
        });

        const time = new Date().toLocaleString('ja-JP', { timeZone: 'Asia/Tokyo' })

        console.log("\x1b[36m%s\x1b[0m", client.user.tag + 'is online.')
        console.log("\x1b[36m%s\x1b[0m", totalCommands + ' commands are available.')
        console.log("\x1b[34m%s\x1b[0m", time);

        setInterval(() => {
            const activities = [
    `アストラルプレーンに漂う魂が、セフィロトの樹を超えて転生の道を辿る。`,
    `シンメトリカルなパラダイムが交錯する中で、無限のカオスが創造の源となる。`,
    `エクリプスの影が、コンジャンクションにおける運命の交差点で深淵を覗く。`,
    `ヴォイドの彼方にひそむ存在、未知なるエンティティとの接触を果たす瞬間。`,
    `シンギュラリティの渦中で、存在そのものがディスインテグレーションを迎える。`,
    `ゼノフィリアの世界に足を踏み入れた瞬間、時間と空間が歪み始める。`,
    `オクタヴィアの幻影に囚われ、全ての記憶がリインカーネーションの輪を回る。`,
    `リリスの呪縛から解き放たれ、アラクネのように新たな現実を編み上げる。`,
    `カルマの法則が作用する中で、サイケデリックな認識の扉が開かれ、アノマリーが浮かび上がる。`,    
    `インフィニティの境界線を越え、超越的なエゴの解放が訪れる。`,
    `カタストロフの後に現れる、アルケミーの法則によって再生する未知の物質。`,
    `オルタナティブリアリティの中で、エーテルの流れが時間を超えて交差する。`,
    `デュアルシンパシーの力が解き放たれ、パラドクスの中で新たな法則が生まれる。`,
    `ヴァルハラの扉が開かれ、古代の神々が時を超えて蘇る。`,
    `クオンタムフィールドが揺れ動き、存在の真理が顕現する瞬間を迎える。`,
    `アンドロメダの星々が語る、遥かな未来の予兆に心を寄せる。`,
    `アポカリプスの兆しが暗闇を照らし、混沌の中に秩序が芽生える。`,
    `シナジーが高まる中で、オムニバースが次第に一つの点へと収束していく。`,
    `アストロノミカルな現象が引き起こす、ファンタズマゴリアのような幻影。`,
    `ディメンショナルシャドウが過去と未来を繋ぎ、運命の扉を開く鍵となる。`,
    `エクリプスの中で発生したデュアル・オーダーの崩壊が、時空間を歪める。`,
    `カバラの秘儀に基づき、無限のエネルギーが物質に変換される瞬間。`,
    `ゾディアックサインの影響を受け、未知なるダイメンションに足を踏み入れる。`,
    `パラレルユニバースの接点で、異なる自我が一瞬のうちに交錯する。`,
    `イデアの世界に存在する、あらゆる感覚を超えた真実の探求が始まる。`,
    `インターディメンショナルな断絶が、シンギュラリティの先に待ち受ける未知の領域を開く。`,
    `ウィスプのような存在が、夢と現実の境界を曖昧にし、ビジョンを導く。`,
    `アクシデンタルな奇跡が現実の枠を超え、不可視の力が世界を支配する。`,
    `レゾナンスが共鳴し、ディスコーダンスの中に新たな秩序が生まれる。`,
    `エクスカリバーの伝説が再び息を吹き返し、古代の力が現代に呼応する。`,
    `インターフェースを通じて、異次元からのメッセージがシグナルとして届く。`,
    `サバイバルの境界を超え、超人類の進化が新たなパラダイムを開く。`,
    `アニマのエネルギーが流れ、心の中で無限のビジョンが広がる。`,
    `ヴァーチャルリアリティの世界で、物理法則が解体され、意識が新たな次元へと進化する。`,
    `カラクリのように精密に動く時の歯車が、予知の世界を繋ぐ鍵となる。`,
    `プロトタイプのテクノロジーが人類の未来を形成し、サイボーグ化の時代が到来する。`,
    `オルゴールのような音色が、夢幻の世界へと誘い、無限の回廊を駆け抜ける。`,
    `デジタルアートの中に、仮想的な命が宿り、意識を持つ新たな存在が目覚める。`,
    `アナザー・ストーリーが進行する中で、偶然が運命の大きな転換点となる。`,
    `クレセントムーンの下、幻想的な光景が広がり、異世界の扉が開かれる。`,
    `ゼノンの逆説が理論の限界を突破し、現実と虚構の境界が崩れ始める。`,
    `アフィニティが高まり、エクスペリエンスの中で全ての感覚が一つに融合する。`,
    `パラダイムシフトが発生し、空間と時間を超越した意識の拡張が始まる。`,
    `コンヴァージェンスが加速し、全ての物事が一つの点に収束していく。`,
    `トランスミッションの中で、古代の知恵が現代に伝達され、未知の力が目を覚ます。`,
    `ルミナスな光が暗闇を照らし、失われた文明の痕跡が再び姿を現す。`,
    `シナプスが瞬時に繋がり、過去と未来の記憶が一つに交差する。`,
    `オメガポイントに近づくにつれ、全ての生命が共鳴し、終末的な大調和を迎える。`,
    `ナノテクノロジーの進化により、物質の構造そのものが変化を遂げる。`,
    `ミクロコスモが拡大し、全ての存在がグラデーションのように一体となる。`,
    `テレポーテーションが実現し、物理的な限界を超えて新たな冒険が始まる。`,
    `エナジーの流れに乗り、精神と物質が一体化するトランス状態に突入する。`
              
];


            const randomIndex = Math.floor(Math.random() * (activities.length - 1) + 1);
            const newActivity = activities[randomIndex];

            client.user.setPresence({
                activities: [{ name: newActivity, type: "CUSTOM" }],
                status: 'online'
            });
        }, 30000);

        client.channels.cache.get(config.logch.ready).send(client.user.tag + 'でログインしました。');
    }
}

function countSubCommands(options) {
    let count = 0;
    options.forEach(option => {
        if (option.type === 'SUB_COMMAND' || option.type === 'SUB_COMMAND_GROUP') {
            count++;
            if (option.options) {
                count += countSubCommands(option.options);
            }
        }
    });
    return count;
}